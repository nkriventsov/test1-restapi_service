# test1-restapi_service
## Задача
Создать Сервис REST API для расчета депозита. Пример входного вектора ниже:
```JSON
{
"date": "31.01.2021",
"periods": 3,
"amount": 10000,
"rate": 6
}
```

Описание входного вектора в табличном формате:

|Имя|Тип|Валидация|Описание|
|---|---|---------|--------|
|date|String|Формат даты dd.mm.YYYY|Дата заявки|
|periods|Integer|ОТ 1 ДО 60|Количество месяцев по вкладу|
|amount|Integer|от 10 000 до 3 000 000|Сумма вклада|
|rate|Float|от 1 до 8|Процент по вкладу|


При успешном расчете НТТР-статус ответа 200.

Ответ в формате json:

```JSON
{
"31.01.2021": 10050,
"28.02.2021": 10100.25,
"31.03.2021": 10150.75
}
```

Если валидация входных данных не пройдена
НТТР-статус ответа 400. 

Ответ в формате json:
```JSON
{
"error": "Описание ошибка"
}
```

**ДОПОЛНИТЕЛЬНЫЕ УСЛОВИЯ**
1. Язык программирования - Python;
2. Покрытие PyTest-тестами не менее 80%;
3. Весь код должен храниться на github.com;
4. В репозитории создать Dockerfile для сборки приложения.

## Решение

Стек: FastAPI, SQLAlchemy, PostgreSQL, Docker, Docker Compose, Poetry, PyTest

В реализации задействован паттерн репозиторий.

### Пример положительного запроса в OpenAPI
Запрос:
```JSON
{
  "date": "01.01.2024",
  "periods": 12,
  "amount": 100000,
  "rate": 6
}
```

Ответ:
```JSON
{
  "31.01.2024": 100500,
  "29.02.2024": 101002.5,
  "31.03.2024": 101507.51,
  "30.04.2024": 102015.05,
  "31.05.2024": 102525.13,
  "30.06.2024": 103037.75,
  "31.07.2024": 103552.94,
  "31.08.2024": 104070.7,
  "30.09.2024": 104591.06,
  "31.10.2024": 105114.01,
  "30.11.2024": 105639.58,
  "31.12.2024": 106167.78
}
```

### Результат тестирования
```shell
Name                          Stmts   Miss  Cover   Missing
-----------------------------------------------------------
src\api\deposit.py               11      4    64%   46-52
src\config.py                    12      0   100%
src\database.py                   7      0   100%
src\main.py                      10      1    90%   23
src\models\deposit.py             9      0   100%
src\repositories\base.py         12      0   100%
src\repositories\deposit.py      26      0   100%
src\schemas\deposit.py           16      0   100%
-----------------------------------------------------------
TOTAL                           103      5    95%
```